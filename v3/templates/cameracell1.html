<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="initial-scale=1, width=device-width" />

  <link rel="stylesheet" href="./global.css" />
  <link rel="stylesheet" href="./cameracell1.css" />
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Inter:ital,wght@0,500;0,600;0,700;1,500;1,600&display=swap" />
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap" />
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Post No Bills Colombo ExtraBold:wght@400&display=swap" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Plus Jakarta Sans:wght@800&display=swap" />
</head>

<body>
  <!-- <div class="camera-cell1"> -->
  <!-- <div class="bg8"></div>
  <div class="camera-cell-item"></div>
  <div class="logo8">
    <img class="shape-icon10" alt="" src="./public/shape.svg" />

    <img class="group-icon8" alt="" src="./public/group.svg" />
  </div>
  <div>
    <img class="side-menu-icon2" alt="" src="./public/side-menu@2x.png" />
  </div> -->


  
 
  <div id="grid_container">

  </div>

  <button id="showIpButton">Show IP List</button>
  <button id="showVideoButton">Show Video Feeds</button>
  <img src="http://10.254.3.53:8080/video" alt="Live Stream" />
    <img src="http://10.254.3.183:8080/video" alt="Live Stream" />

  <!-- Container for video feeds -->
  <div id="videoContainer"></div>
  
  <!-- List to display IPs -->
  <ul id="ipList"></ul>


  <script>
    document.addEventListener("DOMContentLoaded", function () {
        // Find the button element by its ID
        const showIpButton = document.getElementById("showIpButton");

        // Add a click event listener to the button
        showIpButton.addEventListener("click", function () {
          // Read data from local storage
          const storedCoordinates = localStorage.getItem("selectedCoordinates");

          // Check if data is present
          if (storedCoordinates) {
            // Parse the JSON data
            const coordinates = JSON.parse(storedCoordinates);

            // Extract and display IPs in a list format
            const ipList = document.getElementById("ipList");
            ipList.innerHTML = "<strong>IP List:</strong>";

            coordinates.forEach((entry) => {
              if (entry.ip) {
                const listItem = document.createElement("li");
                listItem.textContent = entry.ip;
                ipList.appendChild(listItem);
              }
            });
          } else {
            alert("No coordinates found in local storage.");
          }
        });
      });

      showVideoButton.addEventListener("click", function () {
          // Read data from local storage
          const storedCoordinates = localStorage.getItem("selectedCoordinates");

          // Check if data is present
          if (storedCoordinates) {
            // Parse the JSON data
            const coordinates = JSON.parse(storedCoordinates);

            // Create a container for the image feeds
            const imageContainer = document.getElementById("imageContainer");
            imageContainer.innerHTML = ""; // Clear existing content

            // Create image elements for each camera and append to the container
            coordinates.forEach((entry) => {
              if (entry.ip) {
                const imageElement = document.createElement("img");
                imageElement.src = `http://${entry.ip}/video`;
                imageElement.alt = `Live Stream - ${entry.ip}`;
                imageElement.width = 300; // Set image width
                imageElement.height = 200; // Set image height

                const imageWrapper = document.createElement("div");
                imageWrapper.appendChild(imageElement);
                imageContainer.appendChild(imageWrapper);
              }
            });
          } else {
            alert("No coordinates found in local storage.");
          }
        });

    var rectangle15 = document.getElementById("hh1");
    if (rectangle15) {
      rectangle15.addEventListener("click", function (e) {
        window.location.href = "./cameracell.html";
      });
    }
  </script>
</body>

</html>